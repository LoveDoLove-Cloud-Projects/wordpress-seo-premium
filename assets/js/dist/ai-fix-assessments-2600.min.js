(()=>{var e={951:(e,t)=>{var n;!function(){"use strict";var s={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)s.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.data,t=window.wp.domReady;var s=n.n(t);const o=window.wp.element,r=window.wp.hooks,i=window.yoast.uiLibrary,a=window.lodash,l=window.wp.i18n,c="loading",d="success",u="error",p="error",g="fullContent",h={keyphraseDensityAIFixes:{title:(0,l.__)("AI - Keyphrase density","wordpress-seo-premium"),description:(0,l.__)("Use keyphrase words in the text frequently but not excessively.","wordpress-seo-premium"),parameterName:"seo-keyphrase-density",storeName:"keyphraseDensity",promptContent:g},introductionKeywordAIFixes:{title:(0,l.__)("AI - Keyphrase in introduction","wordpress-seo-premium"),description:(0,l.__)("Include words from the keyphrase in the first paragraph of the text.","wordpress-seo-premium"),parameterName:"seo-keyphrase-introduction",storeName:"keyphraseIntroduction",promptContent:"introduction"},keyphraseDistributionAIFixes:{title:(0,l.__)("AI - Keyphrase distribution","wordpress-seo-premium"),description:(0,l.__)("Evenly distribute keyphrase words throughout the text.","wordpress-seo-premium"),parameterName:"seo-keyphrase-distribution",storeName:"keyphraseDistribution",promptContent:g},subheadingsKeywordAIFixes:{title:(0,l.__)("AI - Keyphrase in subheadings","wordpress-seo-premium"),description:(0,l.__)("Include at least one word from the keyphrase in each subheading.","wordpress-seo-premium"),parameterName:"seo-keyphrase-subheadings",storeName:"keyphraseSubheadings",promptContent:g},textSentenceLengthAIFixes:{title:(0,l.__)("AI - Sentence length","wordpress-seo-premium"),description:(0,l.__)("Ensure long sentences are shortened or split for better readability.","wordpress-seo-premium"),parameterName:"read-sentence-length",storeName:"sentenceLength",promptContent:"sentenceLength"},textParagraphTooLongAIFixes:{title:(0,l.__)("AI - Paragraph length","wordpress-seo-premium"),description:(0,l.__)("Ensure long paragraphs are shortened or split for better readability.","wordpress-seo-premium"),parameterName:"read-paragraph-length",storeName:"paragraphLength",promptContent:"paragraphLength"}},m="yoast-seo/ai-generator",y="yoast-seo-premium/ai-optimize",f={blockEditor:"Gutenberg",classicEditor:"Classic",elementorEditor:"Elementor"},w=["core/paragraph","core/heading","core/list-item","core/table"],b="yoast-seo/editor",C="core/block-editor",E=window.yoast.propTypes;var x=n.n(E);const S=window.yoast.aiFrontend;var I=n(951),v=n.n(I);const k=window.yoast.reduxJsToolkit,M=window.wp.apiFetch;var P=n.n(M);const L=window.yoast.analysis,T=(0,a.get)(window,"yoast.editorModules.aiGenerator.helpers.removesLocaleVariantSuffixes",a.noop),A=window.wp.dom,F=new DOMParser,R=e=>{const t=F.parseFromString("<body>"+e+"</body>","text/html");let n=!1;return t.querySelectorAll("ins.yst-diff").forEach((e=>{(0,A.unwrap)(e),n=!0})),t.querySelectorAll("del.yst-diff").forEach((e=>{(0,A.remove)(e),n=!0})),n?t.body.innerHTML:e},N=e=>{const t=F.parseFromString("<body>"+e+"</body>","text/html");let n=!1;return t.querySelectorAll("ins.yst-diff").forEach((e=>{(0,A.remove)(e),n=!0})),t.querySelectorAll("ins.yst-paragraph").forEach((e=>{e.textContent=" ",(0,A.unwrap)(e),n=!0})),t.querySelectorAll("del.yst-diff").forEach((e=>{(0,A.unwrap)(e),n=!0})),n?t.body.innerHTML:e};class q{getContentRetrievalStrategy(){throw new Error("Method 'getContentRetrievalStrategy' must be implemented.")}addElementTargetingLogic(e){throw new Error("Method 'addElementTargetingLogic' must be implemented.")}cleanUpElementTargetingLogic(){throw new Error("Method 'cleanUpElementTargetingLogic' must be implemented.")}getEditorContent(){throw new Error("Method 'getEditorContent' must be implemented.")}resetEditorContent(e){throw new Error("Method 'resetEditorContent' must be implemented.")}previewSuggestions(e){throw new Error("Method 'previewSuggestions' must be implemented.")}applySuggestions(){throw new Error("Method 'applySuggestions' must be implemented.")}dismissSuggestions(){throw new Error("Method 'dismissSuggestions' must be implemented.")}removeAutosave(){throw new Error("Method 'removeAutosave' must be implemented.")}disableEditingMode(){throw new Error("Method 'disableEditingMode' must be implemented.")}enableEditingMode(){throw new Error("Method 'enableEditingMode' must be implemented.")}closeSidebar(){throw new Error("Method 'closeSidebar' must be implemented.")}getFullScreenClass(){throw new Error("Method 'getFullScreenClass' must be implemented.")}}const _=window.wp.blocks,O=["core/quote","core/cover"],B=(e,t)=>e.reduce(((e,n)=>O.includes(n.name)||(e=>{var t;return!(t=(0,_.getBlockContent)(e),(new DOMParser).parseFromString(t,"text/html").documentElement.textContent).trim()})(n)?e:t.includes(n.name)?[...e,n]:n.innerBlocks.length>0?[...e,...B(n.innerBlocks,t)]:e),[]),j={ja:e=>Math.round(e.length/2),default:e=>Math.round(e.length/4)},D=t=>{const n=(0,e.select)(b).getContentLocale();return(j[n]||j.default)(t)};class U{getIntroductionText(e,t){throw new Error("Method 'getIntroductionText()' must be implemented.")}getFullText(e,t){throw new Error("Method 'getFullText()' must be implemented.")}getParagraphLengthPromptContent(e,t){throw new Error("Method 'getParagraphLengthPromptContent()' must be implemented.")}getSentenceLengthPromptContent(e,t){throw new Error("Method 'getSentenceLengthPromptContent()' must be implemented.")}shouldRetrievePromptContent(){throw new Error("Method 'shouldRetrievePromptContent()' must be implemented.")}}class z extends U{constructor(){super(),this.getSentenceLengthPromptContent=this.getSentenceLengthPromptContent.bind(this),this.getParagraphLengthPromptContent=this.getParagraphLengthPromptContent.bind(this),this.getFullText=this.getFullText.bind(this),this.getIntroductionText=this.getIntroductionText.bind(this),this.cleanUpContent=this.cleanUpContent.bind(this),this.getRelevantPromptContent=this.getRelevantPromptContent.bind(this),this.shouldRetrievePromptContent=this.shouldRetrievePromptContent.bind(this)}cleanUpContent(e,t=(e=>e)){return(e=t(e=N(e))).replace(/\n/g,"")}async getIntroductionText(t){const n=(0,a.get)(window,"YoastSEO.analysis.worker.runResearch",a.noop),{result:s}=await n("findKeywordInFirstParagraph",t);if(!s)return{text:"",length:0,type:"introduction",uniqueIds:[]};const o=s.introduction,r=s.parentBlock;if(!o||!r)return{text:"",length:0,type:"introduction",uniqueIds:[]};if("core/freeform"===r.name){const{startOffset:e,endOffset:t}=o.sourceCodeLocation,n=this.cleanUpContent(r.attributes.content,(n=>n.slice(e-r.startOffset,t-r.startOffset)));return{text:n,length:D(n),type:"introduction",uniqueIds:[]}}const{getBlocksByClientId:i}=(0,e.select)(C),l=i(o.clientId);if(!l[0])return{text:"",length:0,type:"introduction",uniqueIds:[]};const c=B(l,w),d=this.cleanUpContent((0,_.serialize)(c,{isInnerBlocks:!1}));return{text:d,length:D(d),type:"introduction",uniqueIds:c.map((e=>e.clientId))}}getFullText(){const{getBlocks:t}=(0,e.select)(C),n=B(t(),w),s=(0,_.serialize)(n,{isInnerBlocks:!1}),o=this.cleanUpContent(s);return{text:o,length:D(o),type:"fullContent",uniqueIds:n.map((e=>e.clientId))}}getRelevantPromptContent(t,n){if(!t||!t._hasMarks)return{text:"",length:0,type:n,uniqueIds:[]};const s=t.marks,o=new Set(s.map((e=>e._properties.position&&e._properties.position.clientId))),{getBlocksByClientId:r}=(0,e.select)(C),i=[];if(o.forEach((e=>{const[t]=r(e);e&&t&&i.push(t)})),!i.length)return{text:"",length:0,type:n,uniqueIds:[]};let a=[];a=B(i,"paragraphLength"===n?["core/paragraph","core/heading","core/list-item"]:w);const l=a.map((e=>e.clientId)),c=(0,_.serialize)(a,{isInnerBlocks:!1}),d=this.cleanUpContent(c);return{text:d,length:D(d),type:n,uniqueIds:l}}getParagraphLengthPromptContent(){const t=(0,e.select)(b).getReadabilityResults().results.find((e=>"textParagraphTooLong"===e._identifier));return this.getRelevantPromptContent(t,"paragraphLength")}getSentenceLengthPromptContent(){const t=(0,e.select)(b).getReadabilityResults().results.find((e=>"textSentenceLength"===e._identifier));return this.getRelevantPromptContent(t,"sentenceLength")}shouldRetrievePromptContent(){return!0}}class H extends q{constructor(){super(),this._contentRetrievalStrategy=new z,this.getContentRetrievalStrategy=this.getContentRetrievalStrategy.bind(this),this.addElementTargetingLogic=this.addElementTargetingLogic.bind(this)}getEditorContent(){return(0,e.select)(C).getBlocks()}resetEditorContent(t){(0,e.dispatch)("core/editor").resetEditorBlocks(t)}previewSuggestions(e){return de(e)}applySuggestions(){re()}dismissSuggestions(){oe()}removeAutosave(){(()=>{const{lockPostSaving:t,unlockPostSaving:n}=(0,e.useDispatch)("core/editor");(0,o.useEffect)((()=>(t("ai-optimize"),()=>{n("ai-optimize")})),[])})()}disableEditingMode(){(()=>{const t=(0,e.useSelect)((e=>{const t=e(C).getBlocks(),n=B(t,w);return(0,a.unionBy)(t,n,"clientId")}),[]),{setBlockEditingMode:n}=(0,e.useDispatch)(C);(0,o.useEffect)((()=>(t.forEach((e=>n(e.clientId,"disabled"))),()=>ue())),[t])})()}enableEditingMode(){ue()}closeSidebar(){window.innerWidth<=768&&(0,e.dispatch)("core/edit-post").closeGeneralSidebar()}getFullScreenClass(){return(0,e.useSelect)((e=>e("core/preferences").get("core/edit-post","fullscreenMode")?"":"lg:yst-start-44"),[])}getContentRetrievalStrategy(){return this._contentRetrievalStrategy}addElementTargetingLogic(t){return new Promise((n=>{var s;const o=null===(s=h[t])||void 0===s?void 0:s.promptContent,r=(0,e.select)(y).selectPromptContentData(o);n({text:r.text,length:r.length,type:o,uniqueIds:r.uniqueIds})}))}cleanUpElementTargetingLogic(){(0,a.noop)()}}const V=new DOMParser,$="data-yst-optimize",K=["P","H1","H2","H3","H4","H5","H6","LI"];class Y extends U{constructor(){super(),this.getIntroductionText=this.getIntroductionText.bind(this),this.getFullText=this.getFullText.bind(this),this.getRelevantPromptContent=this.getRelevantPromptContent.bind(this),this.filterNodes=this.filterNodes.bind(this),this.getParagraphLengthPromptContent=this.getParagraphLengthPromptContent.bind(this),this.getSentenceLengthPromptContent=this.getSentenceLengthPromptContent.bind(this),this.shouldRetrievePromptContent=this.shouldRetrievePromptContent.bind(this),this.getNodesAtOffsets=this.getNodesAtOffsets.bind(this)}filterNodes(e,t){var n,s,o;const r=e.hasClass(t.firstChild,"wp-more-tag"),i="BLOCKQUOTE"===(null===(n=t.parentNode)||void 0===n?void 0:n.nodeName),a="\n"===t.outerText||"BR"===(null===(s=t.firstChild)||void 0===s?void 0:s.nodeName),l=(null===(o=t.children)||void 0===o?void 0:o.length)>0&&Object.values(t.children).every((e=>"IMG"===e.nodeName));return!(r||i||a||l)}async getIntroductionText(e,t){const{injectAttributes:n}=t,s=(0,a.get)(window,"YoastSEO.analysis.worker.runResearch",a.noop),{result:o}=await s("findKeywordInFirstParagraph",e),r=tinyMCE.get("content"),i=null==r?void 0:r.dom;if(null==o||!o.introduction||!i)return{text:"",length:0,type:"introduction",uniqueIds:[]};const l=o.introduction,c=l.isImplicit?o.parentBlock.name:l.name;let d=i.select(`${c}`);d=d.filter((e=>this.filterNodes(i,e)));const{startOffset:u,endOffset:p}=l.sourceCodeLocation,g=r.getContent().slice(u,p),h=V.parseFromString("<body>"+g+"</body>","text/html");let m;d.some((e=>e.textContent.trim()===h.body.textContent.trim()&&(m=e,!0)));let y=[],f="";return m&&(n&&(y=this.setOptimizeDataAttribute([m],i)),f=m.outerHTML),{text:f,length:D(f),type:"introduction",uniqueIds:y}}getFullText(e,t){const{injectAttributes:n}=t,s=tinyMCE.get("content").dom;if(!s)return{text:"",length:0,type:"fullContent",uniqueIds:[]};const o=K.join(", ");let r=s.select(o);if(r=r.filter((e=>this.filterNodes(s,e))),r.length>0&&r.every((e=>e.nodeName.startsWith("H"))))return{text:"",length:0,type:"fullContent",uniqueIds:[]};let i=[];n&&(i=this.setOptimizeDataAttribute(r,s));const a=r.map((e=>e.outerHTML)).join("");return{text:a,length:D(a),type:"fullContent",uniqueIds:i}}setOptimizeDataAttribute(e,t){const n=[];return e.forEach((e=>{const s=t.getAttrib(e,$)||"";if(s)n.push(s);else{const s=(0,a.uniqueId)();t.setAttrib(e,$,s),n.push(s)}})),[...new Set(n)]}getMarksOffsets(e){return e.map((e=>e._properties.position.startOffset))}isMarkOffsetInRange(e,t,n){return e>=t&&e<t+n}getNodesAtOffsets(e,t){const n=this.getMarksOffsets(t),s=e.getBody(),o=new Set;let r=0;for(const e of(null==s?void 0:s.children)||[]){if(!K.includes(e.nodeName))continue;const t=e.outerHTML.length;for(const s of n)if(this.isMarkOffsetInRange(s,r,t)){o.add(e);break}r+=t}return Array.from(o)}getRelevantPromptContent(e,t,n){const s=tinyMCE.get("content"),o=s.dom;if(!e||!e._hasMarks||!o)return{text:"",length:0,type:t,uniqueIds:[]};let r=e.marks;r=(0,a.orderBy)(r,(e=>e._properties.position.startOffset),["asc"]);const i=this.getNodesAtOffsets(s,r).filter((e=>null!==e)).filter((e=>this.filterNodes(o,e)));let l=[];n&&(l=this.setOptimizeDataAttribute(i,o));const c=i.map((e=>e.outerHTML)).join("");return{text:c,length:D(c),type:t,uniqueIds:l}}getParagraphLengthPromptContent(t,n){const{injectAttributes:s}=n,o=(0,e.select)(b).getReadabilityResults().results.find((e=>"textParagraphTooLong"===e._identifier));return this.getRelevantPromptContent(o,"paragraphLength",s)}getSentenceLengthPromptContent(t,n){const{injectAttributes:s}=n,o=(0,e.select)(b).getReadabilityResults().results.find((e=>"textSentenceLength"===e._identifier));return this.getRelevantPromptContent(o,"sentenceLength",s)}shouldRetrievePromptContent(){return!!tinyMCE.get("content")&&!1===tinyMCE.get("content").isHidden()}}const W=/\bai-optimize-[^\s]*\b/gi;function G(e,t=!0){const n=e.dom,s=K.join(", "),o=n.select(s);o&&0!==o.length&&o.forEach((e=>{if(n.getAttrib(e,$)&&n.setAttrib(e,$,null),t){const t=(n.getAttrib(e,"class")||"").replace(W,"").trim();n.setAttrib(e,"class",t)}}))}class J extends q{constructor(){super(),this._contentRetrievalStrategy=new Y,this.getContentRetrievalStrategy=this.getContentRetrievalStrategy.bind(this),this.addElementTargetingLogic=this.addElementTargetingLogic.bind(this)}getEditorContent(){const e=tinyMCE.get("content");if(e)return e.getContent()}resetEditorContent(e){const t=tinyMCE.get("content");t&&t.setContent(e)}previewSuggestions(e){return ge(e)}applySuggestions(){ye()}dismissSuggestions(){fe()}removeAutosave(){(0,o.useEffect)((()=>(wp.autosave.server.suspend(),()=>wp.autosave.server.resume())),[]),(0,o.useEffect)((()=>{const e=(e,t)=>{const n=document.getElementById(e);n&&(n.disabled=t)};return e("publish",!0),e("save-post",!0),()=>{e("publish",!1),e("save-post",!1)}}),[])}disableEditingMode(){(0,o.useEffect)((()=>{const e=e=>{const t=document.getElementById("content-html");t&&(t.disabled=e)};e(!0);const t=tinyMCE.get("content");return t?(t.setMode("readonly"),()=>{t.setMode("design"),e(!1)}):(console.warn("TinyMCE editor not found. Cannot set edit mode."),a.noop)}),[])}enableEditingMode(){const e=tinyMCE.get("content");e&&e.setMode("design")}closeSidebar(){window.innerWidth<=768&&(0,a.noop)()}getFullScreenClass(){return null!==document.fullscreenElement?"":"lg:yst-start-44"}getContentRetrievalStrategy(){return this._contentRetrievalStrategy}async addElementTargetingLogic(e){try{var t;const n=this.getContentRetrievalStrategy(),s=(0,a.get)(window,"YoastSEO.analysis.collectData",!1),o=s?L.Paper.parse(s()):null,r=null===(t=h[e])||void 0===t?void 0:t.promptContent;return await(async(e,t)=>{const n={fullContent:e.getFullText,introduction:e.getIntroductionText,paragraphLength:e.getParagraphLengthPromptContent,sentenceLength:e.getSentenceLengthPromptContent},{editorData:s,contentType:o}=t,r=n[o];return await r(s,{injectAttributes:!0})})(n,{editorData:o,contentType:r})}catch(e){console.error("Error adding data attributes:",e)}}cleanUpElementTargetingLogic(){G(tinyMCE.get("content"),!1)}}class Q{constructor(e){if(this._strategy=null,"blockEditor"===e)this._strategy=new z;else{if("classicEditor"!==e)throw new Error("Unsupported editor");this._strategy=new Y}this.getSentenceLengthPromptContent=this.getSentenceLengthPromptContent.bind(this),this.getParagraphLengthPromptContent=this.getParagraphLengthPromptContent.bind(this),this.getFullText=this.getFullText.bind(this),this.getIntroductionText=this.getIntroductionText.bind(this),this.shouldRetrievePromptContent=this.shouldRetrievePromptContent.bind(this)}getIntroductionText(e,t){if(!this._strategy)throw new Error("Strategy not available");if(!this._strategy.getIntroductionText)throw new Error("Method 'getIntroductionText()' not implemented");return this._strategy.getIntroductionText(e,t)}getFullText(e,t){if(!this._strategy)throw new Error("Strategy not available");if(!this._strategy.getFullText)throw new Error("Method 'getFullText()' not implemented");return this._strategy.getFullText(e,t)}getParagraphLengthPromptContent(e,t){if(!this._strategy)throw new Error("Strategy not available");if(!this._strategy.getParagraphLengthPromptContent)throw new Error("Method 'getParagraphLengthPromptContent()' not implemented");return this._strategy.getParagraphLengthPromptContent(e,t)}getSentenceLengthPromptContent(e,t){if(!this._strategy)throw new Error("Strategy not available");if(!this._strategy.getSentenceLengthPromptContent)throw new Error("Method 'getSentenceLengthPromptContent()' not implemented");return this._strategy.getSentenceLengthPromptContent(e,t)}shouldRetrievePromptContent(){if(!this._strategy)throw new Error("Strategy not available");if(!this._strategy.shouldRetrievePromptContent)throw new Error("Method 'shouldRetrievePromptContent()' not implemented");return this._strategy.shouldRetrievePromptContent()}}const X=window.wp.htmlEntities,Z=(t,n)=>{const s=(0,e.select)(C).getBlockRootClientId(t);s&&(0,e.dispatch)(C).setBlockEditingMode(s,n)},ee=new DOMParser,te=()=>{const t=(0,e.select)(b).getActiveAIFixesButton(),{selectUniqueIds:n}=(0,e.select)(y),{getBlocks:s,getBlocksByClientId:o}=(0,e.select)(C);if(!t){const e=s();return{storeName:"",blockIds:e.map((e=>e.clientId)),blocks:e}}const r=h[t].promptContent,i=n(r);return{storeName:r,blockIds:i,blocks:o(i)}},ne=t=>{const{updateUniqueIds:n}=(0,e.dispatch)(y),{replaceBlock:s}=(0,e.dispatch)(C),{storeName:o,blockIds:r,blocks:i}=te();let a=r;i.forEach((e=>{const n=(0,_.serialize)([e],{isInnerBlocks:!1}),o=(0,X.decodeEntities)(t(n));if(n!==o){const t=(0,_.parse)(o,{})[0];Z(e.clientId,"default"),s(e.clientId,t),a=a.toSpliced(a.indexOf(e.clientId),1,t.clientId)}})),o&&n({promptContentType:o,uniqueIds:a})},se=e=>{const t=ee.parseFromString("<body>"+e+"</body>","text/html");let n=!1;for(;t.querySelector("ins.yst-paragraph");){const e=t.querySelector("ins.yst-paragraph"),s=t.createTreeWalker(t.body,NodeFilter.SHOW_COMMENT),o=s.nextNode().cloneNode(!1);let r=null;for(;s.nextNode();)r=s.currentNode;const i=r.cloneNode(!1);let a=e.parentNode.cloneNode(!1);const l=[];e.parentNode.childNodes.forEach((t=>{t===e?(l.push(a),l.push(i),l.push(o),a=e.parentNode.cloneNode(!1)):a.appendChild(t.cloneNode(!0))})),l.push(a),e.parentNode.replaceWith(...l),n=!0}return n?t.body.innerHTML:e},oe=()=>{const e=(0,a.get)(window,"YoastSEO.app.refresh",a.noop);ne(N),e()},re=()=>{const t=(0,a.get)(window,"YoastSEO.app.refresh",a.noop);ne(R);const n=(0,e.select)(b).getActiveAIFixesButton();n&&"textParagraphTooLongAIFixes"===n&&(()=>{const{storeName:t,blockIds:n,blocks:s}=te(),{replaceBlock:o}=(0,e.dispatch)(C),{updateUniqueIds:r}=(0,e.dispatch)(y);let i=n;s.forEach((e=>{const t=(0,_.serialize)([e],{isInnerBlocks:!1});if(!t.includes('<ins class="yst-paragraph">'))return;const n=se(t),s=(0,_.parse)(n,{});o(e.clientId,s);const r=s.map((e=>e.clientId));i=i.toSpliced(i.indexOf(e.clientId),1,...r)})),t&&r({promptContentType:t,uniqueIds:i})})(),t()},ie=(e,t)=>!(!e||!t||(t.isValid?e.name!==t.name&&(console.error("The type of block from the editor does not match the type of block parsed from the AI suggestion."),1):(console.error("The block parsed from the AI suggestion is not valid."),1))),ae=e=>{const t=document.querySelector('[data-block="'+e+'"]');t&&t.scrollIntoView({behavior:"smooth",block:"start"})},le=()=>{(0,r.addFilter)("yoast.analysis.data","yoast-seo-premium/ai-suggestion-analysis-data-modifier",(e=>({...e,text:R(se(e.text))})))},ce=()=>{(0,e.select)(C).getBlocksByName("core/details").forEach((t=>{(0,e.dispatch)(C).updateBlockAttributes(t,{showContent:!0})}))},de=t=>{const n=(0,e.select)(b).getActiveAIFixesButton(),s=h[n].promptContent;return"introductionKeywordAIFixes"===n?((t,n)=>{const{getBlocksByClientId:s}=(0,e.select)(C),{replaceBlock:o}=(0,e.dispatch)(C),{updateUniqueIds:r}=(0,e.dispatch)(y),i=(0,a.get)(window,"YoastSEO.analysis.worker.runResearch",a.noop),l=(0,a.get)(window,"YoastSEO.analysis.collectData",!1);return i("findKeywordInFirstParagraph",l?L.Paper.parse(l()):null).then((i=>{if(i.result){const a=i.result.introduction,l=i.result.parentBlock;if(!a||!l)return;if("core/freeform"===l.name)((t,n,s)=>{const{updateBlockAttributes:o}=(0,e.dispatch)(C),{startOffset:r,endOffset:i}=t.sourceCodeLocation,a=N(n.attributes.content),l=a.slice(0,r-n.startOffset)+s+a.slice(i-n.startOffset),c=n.clientId;Z(c,"default"),o(c,{content:l}),Z(c,"disabled"),ae(c),le()})(a,l,t),r({promptContentType:n,uniqueIds:[l.clientId]});else{const e=a.clientId,i=s(e),l=B(i,w)[0],c=(0,_.parse)(t,{})[0];if(!ie(l,c))throw new Error("Error");{const{clientId:e}=l;Z(e,"default"),o(e,c),Z(c.clientId,"disabled"),ce(),ae(e),le(),r({promptContentType:n,uniqueIds:[c.clientId]})}}}}))})(t,s):function(t,n){const{replaceBlock:s}=(0,e.dispatch)(C),{updateUniqueIds:o}=(0,e.dispatch)(y),{getBlocksByClientId:r}=(0,e.select)(C),i=r((0,e.select)(y).selectUniqueIds(n)),l=(0,_.parse)(t,{});return new Promise(((e,t)=>{if(i.length===l.length){const r=(0,a.zip)(i,l);if(r.every((([e,t])=>ie(e,t)))){const t=[];r.forEach((([e,n])=>{Z(e.clientId,"default"),s(e.clientId,n),Z(n.clientId,"disabled"),ce(),t.push(n.clientId)}));const i=r.find((([e,t])=>e.originalContent!==t.originalContent));ae(i[0].clientId),le(),o({promptContentType:n,uniqueIds:t}),e()}else t("Error")}else console.error("The number of blocks in the editor and the number of blocks parsed from the AI suggestion do not match."),t("Error")}))}(t,s)},ue=()=>{const t=(0,e.select)(C).getBlocks,{setBlockEditingMode:n}=(0,e.dispatch)(C),s=t(),o=B(s,w);(0,a.unionBy)(s,o,"clientId").forEach((e=>{n(e.clientId,"default")}))},pe=new DOMParser,ge=t=>{const n=(0,e.select)(b).getActiveAIFixesButton(),s=h[n].promptContent,o=(0,e.select)(y).selectUniqueIds(s),{updateUniqueIds:i}=(0,e.dispatch)(y),l=(0,a.get)(window,"YoastSEO.app.refresh",a.noop),c=tinyMCE.get("content");if(!c)return Promise.reject("Editor not available");const d=c.dom,u=pe.parseFromString("<body>"+t+"</body>","text/html");return new Promise(((e,t)=>{((e,t,n)=>{const s=[],o=[];let r=!0,i=!1;return n.forEach((n=>{const a=t.querySelector(`[${$}="${n}"]`),l=e.select(`[${$}=${n}]`)[0];s.push(l),o.push(a),l&&a||(r=!1),(null==l?void 0:l.innerHTML)!==(null==a?void 0:a.innerHTML)&&(i=!0)})),r||console.error("Not all elements are present in the DOM or the AI response.",{elementsFromDOM:s,elementsFromAIResponse:o}),i||console.error("No suggestions found in the AI response.",{elementsFromDOM:s,elementsFromAIResponse:o}),r&&i})(d,u,o)?(o.forEach((e=>{const t=u.querySelector(`[${$}="${e}"]`),n=d.select(`[${$}=${e}]`)[0];d.setHTML(n,t.innerHTML)})),(()=>{const e=document.querySelector(".tmce-active");e&&e.scrollIntoView({behavior:"smooth",block:"start"})})(),(0,r.addFilter)("yoast.analysis.data","yoast-seo-premium/ai-suggestion-analysis-data-modifier",(e=>({...e,text:R(e.text)}))),i({promptContentType:s,uniqueIds:o}),l(),e()):(console.error("Error in previewing suggestion"),t("Error"))}))},he=(t,n,s)=>{const o=(0,e.select)(y).selectUniqueIds(n),r=s.dom;o.forEach((e=>{const n=r.select(`[${$}=${e}]`)[0];if(!n)throw new Error(`Element with data attribute ID "${e}" not found in the editor.`);r.setHTML(n,t(n.innerHTML))}))},me=(t,n)=>{const{updateUniqueIds:s}=(0,e.dispatch)(y);G(n,!1),s({promptContentType:t,uniqueIds:[]})},ye=()=>{const t=(0,a.get)(window,"YoastSEO.app.refresh",a.noop),n=(0,e.select)(b).getActiveAIFixesButton();if(!n)return;const s=tinyMCE.get("content");if(!s)return;const o=h[n].promptContent;he(R,o,s),n&&"textParagraphTooLongAIFixes"===n&&((t,n)=>{const s=(0,e.select)(y).selectUniqueIds(t),o=n.dom;s.forEach((e=>{let t=o.select(`[${$}=${e}]`)[0];if(!t)throw new Error(`Element with data attribute ID "${e}" not found in the editor.`);let n,s=1;for(;n=null===(r=t)||void 0===r?void 0:r.querySelector("ins.yst-paragraph");){var r;const i=n.parentNode;o.split(i,n),o.remove(n),t=o.select(`[${$}=${e}]`)[s],s++}}))})(o,s),me(o,s),t()},fe=()=>{const t=(0,a.get)(window,"YoastSEO.app.refresh",a.noop),n=(0,e.select)(b).getActiveAIFixesButton();if(!n)return;const s=tinyMCE.get("content");if(!s)return;const o=h[n].promptContent;he(N,o,s),me(o,s),t()},we=(0,a.get)(window,"yoast.editorModules.aiGenerator.helpers.fetchSuggestions",a.noop),be=(0,k.createSlice)({name:"fixes",initialState:{status:c,error:{code:200,message:"",errorIdentifier:""},fixes:{keyphraseIntroduction:"",keyphraseDensity:"",keyphraseDistribution:"",keyphraseSubheadings:"",sentenceLength:"",paragraphLength:""}},reducers:{setLoading:e=>{e.status=c},setSuccess:(e,{payload:t})=>{e.status=d,e.fixes=t.data},setError:(e,{payload:t})=>{e.status=u,e.error=t}}}),Ce=async(e,t)=>{const{addElementTargetingLogic:n,updatePromptContentType:s,fetchFixes:o,setFetch:r}=t;try{const{text:t,length:i,type:a,uniqueIds:l}=await n(e);s({promptContentType:a,text:t,length:i,uniqueIds:l}),r(await o(e,t))}catch(e){console.error("Error in fetchAiSuggestions:",e)}},Ee=window.ReactJSXRuntime,xe=(0,a.get)(window,"yoast.editorModules.aiGenerator.components.SuggestionError",a.noop),Se=(0,a.get)(window,"yoast.editorModules.aiGenerator.components.SparksLimitNotification",a.noop),Ie=({assessmentName:t,getEditorContent:n,resetEditorContent:s,previewSuggestions:r,applySuggestions:a,dismissSuggestions:g,removeAutosave:w,disableEditingMode:C,enableEditingMode:E,closeSidebar:x,getFullScreenClass:I,addElementTargetingLogic:k,cleanUpElementTargetingLogic:M})=>{const{areFixesApplied:P,isNotificationVisible:A,counts:F,limit:R}=(0,e.useSelect)((e=>({areFixesApplied:e(y).areFixesApplied(),isNotificationVisible:e(y).isNotificationVisible(),counts:e(m).selectUsageCount(),limit:e(m).selectUsageCountLimit()})),[]),{learnMoreLink:N,helperLink:q}=(0,e.useSelect)((e=>({learnMoreLink:e(b).selectLink("https://yoa.st/ai-fix-assessments-toast-learn-more"),helperLink:e(b).selectLink("https://yoa.st/ai-fix-assessments-help-button")})),[]),{setAreFixesApplied:_,setIsNotificationVisible:O,updatePromptContentType:B}=(0,e.useDispatch)(y),{setActiveAIFixesButton:j,setMarkerStatus:D}=(0,e.useDispatch)(b),[U,z]=(0,o.useState)(""),[H,V]=(0,o.useState)(null),$=(0,o.useRef)(null),{position:K}=(0,i.useNotificationsContext)(),{fixes:Y,fetchFixes:W}=(()=>{const{fetchUsageCount:t}=(0,e.useDispatch)(m),[n,s]=(0,o.useReducer)(be.reducer,be.getInitialState()),{synonyms:r,focusKeyphrase:i,contentLocale:a,usageCountEndpoint:l}=(0,e.useSelect)((e=>({focusKeyphrase:e(b).getFocusKeyphrase(),synonyms:e("yoast-seo-premium/editor").getSynonyms(),contentLocale:e(b).getContentLocale(),usageCountEndpoint:e(m).selectUsageCountEndpoint()})),[]),c=(0,o.useCallback)((async(n,o,c=!0)=>{s(be.actions.setLoading());const d=((t,n,s,o,r)=>{let i=L.languageProcessing.helpers.processExactMatchRequest(s).keyphrase;i.length>191&&(i=i.slice(0,191));const a=h[n].parameterName,l=(0,e.select)(b).getEditorType(),c=f[l];return{focus_keyphrase:i,synonyms:o,language:T(r).replace("_","-"),prompt_content:t,assessment:a,editor:c}})(o,n,i,r,a),{status:u,payload:g}=await we({endpoint:"yoast/v1/ai/optimize/",canAbort:c,data:d});switch(u){case"abort":break;case p:s(be.actions.setError(g));break;case"success":g?(s(be.actions.setSuccess({assessment:h[n].storeName,data:g})),t({endpoint:l})):s(be.actions.setError(g))}return u}),[s]);return{fixes:n,fetchFixes:c}})(),G=I(),J=(0,o.useMemo)((()=>U===p||Y.status===u),[U,Y.status]),Q=(0,o.useCallback)((()=>{z(""),Ce(t,{addElementTargetingLogic:k,updatePromptContentType:B,fetchFixes:W,setFetch:z})}),[]),X=(0,o.useCallback)((()=>{s(H),M(),setTimeout((()=>j(null)),150)}),[j,H]),Z=(0,o.useCallback)((()=>{j(null),z("")}),[j]),ee=(0,o.useCallback)((()=>{s(H),M(),setTimeout((()=>j(null)),150),O(!1),_(!1)}),[O,j,_,H]),te=(0,o.useCallback)((()=>{O(!1),z(""),a(),_(!0),setTimeout((()=>{j(null),_(!1)}),5e3)}),[O,j,_,a]),ne=(0,o.useCallback)((()=>{E(),_(!1),O(!1)}),[_,O]);return(0,o.useEffect)((()=>(Ce(t,{addElementTargetingLogic:k,updatePromptContentType:B,fetchFixes:W,setFetch:z}),()=>{g(),z("")})),[z,W,g]),(0,o.useEffect)((()=>{Y.status===d&&Y.fixes&&""!==U&&(null===H&&V(n()),r(Y.fixes).catch((()=>{z(p)})))}),[Y,U]),w(),C(),(0,o.useEffect)((()=>(A&&D("disabled"),()=>D("enabled"))),[A,D]),(0,o.useEffect)((()=>{const e=document.getElementById("adminmenuwrap");return A&&e?(null===$.current&&($.current=e.style.zIndex),e.style.zIndex="10"):!A&&e&&null!==$.current&&(e.style.zIndex=$.current,$.current=null),()=>{e&&null!==$.current&&(e.style.zIndex=$.current,$.current=null)}}),[A]),x(),(0,Ee.jsxs)(o.Fragment,{children:[(0,Ee.jsx)(S.ErrorModal,{title:h[t].title,badgeText:(0,l.__)("Beta","wordpress-seo-premium"),isOpen:J,onClose:Z,aiModalHelperLink:q,children:(0,Ee.jsx)(xe,{errorCode:Y.error.code,errorIdentifier:Y.error.errorIdentifier,invalidSubscriptions:Y.error.missingLicenses,showActions:!0,onRetry:Q,errorMessage:Y.error.message})}),(0,Ee.jsxs)(i.Notifications,{className:v()("yst-mx-[calc(50%-50vw)] yst-transition-all",G),position:"bottom-left",children:[Y.status!==c&&(0,Ee.jsx)(Se,{className:`yst-mb-30 yst-w-96 ${G}`,size:"large"}),Y.status!==u&&!J&&(0,Ee.jsxs)(i.Toast,{id:t,className:"yst-w-96 yst-bg-gradient-to-br yst-from-primary-50 yst-to-indigo-50 yst-border-gradient yst-overflow-y-visible",onDismiss:X,isVisible:A,setIsVisible:O,position:K,children:[Y.status===c&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(S.UsageCounter,{className:"yst-absolute yst-w-[65px] yst-h-[18px] yst-top-[-8px] yst-start-[245px] sm:yst-start-[280px]",limit:R,requests:F,isSkeleton:!0}),(0,Ee.jsx)(S.ToastSkeleton,{})]}),Y.status===d&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(S.UsageCounter,{className:"yst-absolute yst-top-[-10px] yst-end-9",limit:R,requests:F,isSkeleton:!1}),(0,Ee.jsx)(S.ToastContent,{title:h[t].title,description:h[t].description,badgeText:"Beta",learnMoreLink:N,handleDismiss:ee,handleApply:te})]})]}),P&&(0,Ee.jsx)(i.Notifications.Notification,{id:"applied-success-notification",variant:"success",size:"large",dismissScreenReaderLabel:(0,l.__)("Dismiss","wordpress-seo-premium"),autoDismiss:6e3,onDismiss:ne,className:"yst-border-slate-200",children:(0,Ee.jsxs)("div",{className:"yst-flex yst-items-start yst-justify-between",children:[(0,Ee.jsxs)("p",{className:"yst-font-medium yst-text-slate-800",children:[" ",(0,l.__)("Successfully applied!","wordpress-seo-premium")]}),(0,Ee.jsx)(i.Button,{type:"button",variant:"tertiary",className:"yst-text-primary-500 yst-py-0",onClick:ee,children:(0,l.__)("Undo","wordpress-seo-premium")})]})})]})]})};Ie.propTypes={assessmentName:x().string.isRequired,getEditorContent:x().func.isRequired,resetEditorContent:x().func.isRequired,previewSuggestions:x().func.isRequired,applySuggestions:x().func.isRequired,dismissSuggestions:x().func.isRequired,removeAutosave:x().func.isRequired,disableEditingMode:x().func.isRequired,enableEditingMode:x().func.isRequired,closeSidebar:x().func.isRequired,getFullScreenClass:x().func.isRequired,addElementTargetingLogic:x().func.isRequired,cleanUpElementTargetingLogic:x().func.isRequired};const ve=(0,a.get)(window,"yoast.editorModules.aiGenerator.components.Introduction",a.noop),ke=(0,a.get)(window,"yoast.editorModules.aiGenerator.components.FeatureError",a.noop),Me=({assessmentName:t,editor:n})=>{const{initialConsent:s,currentSubscriptions:r,hasValidPremiumSubscription:a,hasValidWooSubscription:c}=(0,e.useSelect)((e=>({initialConsent:e(m).selectHasAiGeneratorConsent(),currentSubscriptions:e(m).selectProductSubscriptions(),hasValidPremiumSubscription:e(m).selectPremiumSubscription(),hasValidWooSubscription:e(m).selectWooCommerceSubscription()})),[]),{aiModalHelperLink:d,isSeoAnalysisActive:u,activeAIOptimizeButton:p,isWooProductEntity:g}=(0,e.useSelect)((e=>({isSeoAnalysisActive:e(b).getPreference("isKeywordAnalysisActive",!0),activeAIOptimizeButton:e(b).getActiveAIFixesButton(),aiModalHelperLink:e(b).selectLink("https://yoa.st/ai-fix-assessments-help-button"),isWooProductEntity:e(b).getIsWooProductEntity()})),[]),y=(0,o.useMemo)((()=>!a||!u||!c&&g),[a,u,c,g]),f=p===t,{setActiveAIFixesButton:w}=(0,e.useDispatch)(b),[C,E]=(0,o.useState)(s),x=(0,o.useCallback)((()=>{w(null)}),[w]),I=(0,o.useCallback)((()=>{E(!0),w(t)}),[E,w,t]),v=(0,o.useRef)(null),k=(0,l.__)("Close modal","wordpress-seo-premium"),M=(0,o.useMemo)((()=>{if("Gutenberg"===n)return new H;if("Classic"===n)return new J;throw new Error("Unsupported editor")}),[n]);return f&&(0,Ee.jsxs)(o.Fragment,{children:[C&&!y&&(0,Ee.jsx)(Ie,{assessmentName:t,getEditorContent:M.getEditorContent,resetEditorContent:M.resetEditorContent,previewSuggestions:M.previewSuggestions,applySuggestions:M.applySuggestions,dismissSuggestions:M.dismissSuggestions,removeAutosave:M.removeAutosave,disableEditingMode:M.disableEditingMode,enableEditingMode:M.enableEditingMode,closeSidebar:M.closeSidebar,getFullScreenClass:M.getFullScreenClass,addElementTargetingLogic:M.addElementTargetingLogic,cleanUpElementTargetingLogic:M.cleanUpElementTargetingLogic}),(0,Ee.jsx)(S.ErrorModal,{title:h[t].title,isOpen:y,onClose:x,badgeText:(0,l.__)("Beta","wordpress-seo-premium"),aiModalHelperLink:d,children:(0,Ee.jsx)(ke,{currentSubscriptions:r,isSeoAnalysisActive:u})}),(0,Ee.jsx)(i.Modal,{className:"yst-introduction-modal",isOpen:!C&&a&&!y,onClose:x,initialFocus:v,children:(0,Ee.jsx)(i.Modal.Panel,{className:"yst-max-w-lg yst-p-0 yst-rounded-3xl",closeButtonScreenReaderText:k,children:(0,Ee.jsx)(ve,{onStartGenerating:I})})})]})};Me.propTypes={assessmentName:x().string.isRequired,editor:x().string.isRequired};const Pe="aiOptimizeNotificationStatus",Le=(0,k.createSlice)({name:Pe,initialState:!1,reducers:{setIsNotificationVisible:(e,{payload:t})=>t}}),Te=Le.getInitialState,Ae={isNotificationVisible:e=>(0,a.get)(e,Pe,"")},Fe=Le.actions,Re=Le.reducer,Ne="appliedFixesStatus",qe=(0,k.createSlice)({name:Ne,initialState:!1,reducers:{setAreFixesApplied:(e,{payload:t})=>t}}),_e=qe.getInitialState,Oe={areFixesApplied:e=>(0,a.get)(e,Ne,"")},Be=qe.actions,je=qe.reducer,De="promptContentFixAssessments",Ue=(0,k.createSlice)({name:De,initialState:{introduction:{text:"",length:0,uniqueIds:[]},fullContent:{text:"",length:0,uniqueIds:[]},sentenceLength:{text:"",length:0,uniqueIds:[]},paragraphLength:{text:"",length:0,uniqueIds:[]}},reducers:{setPromptContentFixAssessments:(e,{payload:t})=>t,updateUniqueIds:(e,{payload:t})=>{const{promptContentType:n,uniqueIds:s}=t;e[n].uniqueIds=s},updatePromptContentType:(e,{payload:t})=>{const{promptContentType:n,text:s,length:o,uniqueIds:r}=t;e[n]&&(e[n].text=s,e[n].length=o,e[n].uniqueIds=r)}}}),ze=Ue.getInitialState,He={selectPromptContentFixAssessments:e=>(0,a.get)(e,De,""),selectUniqueIds:(e,t)=>(0,a.get)(e,[De,t,"uniqueIds"],[]),selectPromptContentData:(e,t)=>(0,a.get)(e,[De,t],"")},Ve=Ue.actions,$e=Ue.reducer;let Ke=!1,Ye=null;const We=t=>{const{setPromptContentFixAssessments:n}=(0,e.dispatch)(y),{isNotificationVisible:s}=(0,e.select)(y),{getActiveMarker:o}=(0,e.select)(b);return()=>{const r=(0,a.get)(window,"YoastSEO.analysis.collectData",!1),i=s(),c=o();(async t=>{const{isAIOptimizeNotificationVisible:n,setOnStore:s,collectData:o,activeMarker:r,contentRetrievalStrategy:i}=t,a=o?L.Paper.parse(o()):null,c=[i.getFullText,i.getIntroductionText,i.getParagraphLengthPromptContent,i.getSentenceLengthPromptContent],d=i.shouldRetrievePromptContent();if(!((e,t,n,s)=>!(!e||t||!s||n))(a,n,r,d))return;const u={},p=[],g=(await Promise.all(c.map((async e=>{try{const t={injectAttributes:!1};return await e(a,t)}catch(e){return console.error("Error retrieving relevant content:",e),null}})))).filter((e=>null!==e));0!==g.length&&(g.forEach((({text:e,length:t,type:n,uniqueIds:s})=>{u[n]={text:e,length:t,uniqueIds:s},p.push({length:t,type:n})})),(t=>{const n={};t.forEach((({length:e,type:t})=>{(0===e||e>2e3)&&Object.keys(h).filter((e=>h[e].promptContent===t)).forEach((t=>{n[t]=(e=>{const t=(0,l.__)("None of the elements in your content is supported by Yoast AI Optimize. This means you cannot use this feature with your current content.","wordpress-seo-premium"),n=(0,l.__)("Your text is too long for the AI model to process.","wordpress-seo-premium");return 0===e?t:n})(e)}))}));const{setDisabledAIFixesButtons:s}=(0,e.dispatch)(b);s(n)})(p),s(u))})({isAIOptimizeNotificationVisible:i,setOnStore:n,collectData:r,activeMarker:c,contentRetrievalStrategy:t})}},Ge=t=>{const n=new Q(t);We(n),(0,e.subscribe)((0,a.debounce)((t=>{const{getEditorDataContent:n,getReadabilityResults:s,getResultsForFocusKeyword:o}=(0,e.select)(b),{areFixesApplied:r,isNotificationVisible:i}=(0,e.select)(y),l=(0,a.get)(window,"yoast.editorModules.helpers.createWatcher",a.noop),c=((...e)=>()=>e.map((e=>e())))(r,n,(0,a.get)(window,"YoastSEO.analysis.collectData",!1),s,i,(()=>"undefined"!=typeof tinyMCE&&tinyMCE.get("content")),o),d=We(t);return setTimeout(d,1500),l(c,d)})(n),1500,{maxWait:3e3}))},Je=t=>{Ke||(Ke=!0,"1"!==(0,a.get)(window,"wpseoPremiumAiOptimize.hasSeenIntroduction",!1)&&(()=>{try{P()({path:"yoast/v1/introductions/ai-fix-assessments/seen/",method:"POST"})}catch(e){}})());const n=(0,a.get)(window,"wpseoScriptData.metabox.isRtl",!1),s=(0,e.select)(b).getEditorType(),o=f[s];Ye.render((0,Ee.jsx)(i.Root,{context:{isRtl:n},children:(0,Ee.jsx)(Me,{assessmentName:t,editor:o})}))},Qe=()=>{"classicEditor"===(0,e.select)(b).getEditorType()&&(()=>{const e=document.querySelector("#post");if(!e)return;const t=tinyMCE.get("content");t&&(e.addEventListener("submit",(function(){const e=document.querySelector("#content-html");e&&"true"===e.getAttribute("aria-pressed")&&tinyMCE.init({selector:"#content"}),G(t),t.save()})),e.addEventListener("click",(function(e){"content-html"===e.target.id&&(tinyMCE.init({selector:"#content"}),G(t))})))})()};s()((()=>{const t=document.getElementById("yoast-seo-premium-ai-optimize");t&&(Ye=(0,o.createRoot)(t),((t={})=>{(0,e.register)((t=>(0,e.createReduxStore)(y,{actions:{...Ve,...Be,...Fe},selectors:{...He,...Oe,...Ae},initialState:(0,a.merge)({},{[De]:ze(),[Ne]:_e(),[Pe]:Te()},t),reducer:(0,e.combineReducers)({[De]:$e,[Ne]:je,[Pe]:Re})}))(t))})(),(0,r.addAction)("yoast.ai.fixAssessments","yoast/yoast-seo-premium/AiFixAssessments",Je),setTimeout(Qe,100))})),window.jQuery(window).on("YoastSEO:ready",(()=>{const t=(0,e.select)(b).getEditorType();(0,e.select)("core/block-editor")&&"blockEditor"===t&&Ge("blockEditor"),"classicEditor"===t&&Ge("classicEditor")}))})()})();