(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.components,r=window.wp.element,s=window.wp.i18n,n=window.yoast.helpers,o=window.yoast.propTypes;var i=e.n(o);const a=(e,t)=>{try{return(0,r.createInterpolateElement)(e,t)}catch(t){return console.error("Error in translation for:",e,t),e}},d=window.wp.apiFetch;var c=e.n(d);function l(e){return(t,r)=>{if(void 0===t.method||"GET"===t.method)return r(t);const n=void 0===t.parse||t.parse;return r({...t,parse:!1}).then((t=>{let r=null;return t.headers&&"function"==typeof t.headers.get&&(r=t.headers.get("X-Yoast-Redirect-Created")),r&&e(r),t.json&&n?t.json():t})).catch((e=>function(e,t=!0){if(!t)throw e;return(e=>{const t={code:"invalid_json",message:(0,s.__)("The response is not a valid JSON response.")};if(!e||!e.json)throw t;return e.json().catch((()=>{throw t}))})(e).then((e=>{const t={code:"unknown_error",message:(0,s.__)("An unknown error occurred.")};throw e||t}))}(e,n)))}}const p=[];let u=!1;function h(e){var t;t=e.split(";").map((e=>e.split("=").map((e=>e.trim())))).reduce(((e,t)=>{const r=t[0],s=t[1]||!0;return e[r]=s,e}),{}),p.forEach((e=>e(t)))}const m=window.ReactJSXRuntime,w=(0,n.makeOutboundLink)(),f=({href:e,children:t})=>(0,m.jsx)(w,{href:e,children:t});f.defaultProps={children:""},f.propTypes={href:i().string.isRequired,children:i().string};class g extends r.Component{constructor(){super(),this.state={open:!1,loading:!1,parsedHeader:null},this.close=this.close.bind(this),this.undoRedirect=this.undoRedirect.bind(this)}render(){return this.state.open?(0,m.jsxs)(t.Modal,{title:(0,s.__)("Redirect created","wordpress-seo-premium"),onRequestClose:this.close,className:"yoast-redirect-notification-modal",children:[(0,m.jsx)("p",{children:(0,s.sprintf)(/* translators: %s expands to Yoast SEO Premium */ /* translators: %s expands to Yoast SEO Premium */
(0,s.__)("%s just created a redirect from the old URL to the new URL.","wordpress-seo-premium"),"Yoast SEO Premium")}),(0,m.jsx)("p",{className:"yoast-redirect-notification-modal-url",children:a((0,s.sprintf)(/* translators: {{link}}%s{{/link}} expands to a URL surrounded by anchor tags */ /* translators: {{link}}%s{{/link}} expands to a URL surrounded by anchor tags */
(0,s.__)("Old URL: {{link}}%s{{/link}}","wordpress-seo-premium").replace("{{link}}","<link>").replace("{{/link}}","</link>"),`${window.location.origin}/${this.state.parsedHeader.origin}`),{link:(0,m.jsx)(f,{href:"/"+this.state.parsedHeader.origin})})}),(0,m.jsx)("p",{className:"yoast-redirect-notification-modal-url",children:a((0,s.sprintf)(/* translators: {{link}}%s{{/link}} expands to a URL surrounded by anchor tags */ /* translators: {{link}}%s{{/link}} expands to a URL surrounded by anchor tags */
(0,s.__)("New URL: {{link}}%s{{/link}}","wordpress-seo-premium").replace("{{link}}","<link>").replace("{{/link}}","</link>"),`${window.location.origin}/${this.state.parsedHeader.target}`),{link:(0,m.jsx)(f,{href:"/"+this.state.parsedHeader.target})})}),(0,m.jsxs)("div",{className:"yoast-redirect-notification-modal-buttons",children:[(0,m.jsx)(t.Button,{className:"yoast-redirect-notification-modal-button",onClick:this.close,isPrimary:!0,disabled:this.state.loading,children:(0,s.__)("OK","wordpress-seo-premium")}),(0,m.jsx)(t.Button,{className:"yoast-redirect-notification-modal-button",onClick:this.undoRedirect,isLink:!0,isDestructive:!0,isBusy:this.state.loading,disabled:this.state.loading,children:(0,s.__)("Undo","wordpress-seo-premium")})]})]}):null}undoRedirect(){const{objectId:e,objectType:t}=this.state.parsedHeader;this.setState({loading:!0},(()=>{(function(e,t){return c()({method:"POST",url:wpApiSettings.root+"yoast/v1/redirects/undo-for-object",headers:{"X-WP-Nonce":wpApiSettings.nonce},data:{obj_id:e,obj_type:t}})})(e,t).then((()=>{this.close()}))}))}close(){this.setState({open:!1,loading:!1,parsedHeader:null})}componentDidMount(){!function(e){if(!u){const e=l(h);c().use(e),u=!0}p.push(e)}((e=>{this.setState({open:!0,parsedHeader:e})}))}}const j=g;wp.plugins.registerPlugin("yoast-redirect-notification",{render:j})})();